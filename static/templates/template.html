<!DOCTYPE html>
<html>
<head>
    <head>
        <!-- Three mandatory meta tags when using Bootstrap -->
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- Latest compiled and minified Bootstrap CSS -->
        <link rel="stylesheet" href="static/css/bootstrap.min.css">
        <link rel="stylesheet" href="static/css/main.css">
        <title>Dataset comparison report</title>
    </head>
</head>
<body>
<div class="container" style="max-width: 1000px;">
    <!-- Title across the entire container -->
    <div style="text-align: center;">
        <h1>Visual report comparing two datasets</h1>
        <p><i>Built using Seaborn, Bootstrap and Jinja2 templates</i></p>
    </div>
    <div class="row">
        <div>
            <h4>What can we tell you about these two datasets?</h4>
            <p>How long and wide are these boys?</p>
            <div class="row">
                {% for df in summary['DFs'] %}
                <div class="col-md-6">
                <table>
                    <TR>
                        <TD class="table_top" colspan="2">{{ df }}</TD>
                    </TR>
                    <TR>
                        <TD>Number of rows</TD>
                        <TD>Number of columns</TD>
                    </TR>
                    <TR>
                        <TD>{{ summary['DFs'][df]['shape'][0] }}</TD>
                        <TD>{{ summary['DFs'][df]['shape'][1] }}</TD>
                    </TR>
                </table>
                </div>
                {% endfor %}

            </div>
            <p></p>
            <p>I want more! Tell me what <u>mismatching</u> columns they have:</p>
            <ul>
                {% for item in summary['Metadata']['diff_vars'] %}

                    <li style="font-size: 18px">

                    {% if item|length == 2 %}
                        {{ item[0] }} - only in {{ item[1] }}
                    {% else %}
                        {{ item }}
                    {% endif %}
                    
                    </li>

                {% endfor %}
            </ul>

        </div>
    </div>

    <div class="row">

    <p>OK, you got me interested. Show me what they have in common:</p>

        
        <div>
        <table class="table table-hover">
            <thead>
            <TR>
                <TD class="table_top">Variable Name</TD>
                <TD class="table_top">DF1 - Uniques</TD>
                <TD class="table_top">DF2 - Uniques</TD>
                <TD class="table_top">DF1 - NAs</TD>
                <TD class="table_top">DF2 - NAs</TD>
            </TR>
            </thead>
            <tbody>
            {% for key in summary['Metadata']['common_vars'].keys() %}
                <TR>
                    <TD>{{ key }}</TD>
                    <TD class={{ 'unique_highlight' if 
                    summary['Metadata']['common_vars'][key]['DFs']['DF1']['Uniques'] != 
                    summary['Metadata']['common_vars'][key]['DFs']['DF2']['Uniques'] }}>
                        {{ summary['Metadata']['common_vars'][key]['DFs']['DF1']['Uniques'] }}
                    </TD>
                    <TD class={{ 'unique_highlight' if 
                    summary['Metadata']['common_vars'][key]['DFs']['DF1']['Uniques'] != 
                    summary['Metadata']['common_vars'][key]['DFs']['DF2']['Uniques'] }}>
                        {{ summary['Metadata']['common_vars'][key]['DFs']['DF2']['Uniques'] }}
                    </TD>
                    <TD class={{ 'na_highlight' if 
                    summary['Metadata']['common_vars'][key]['DFs']['DF1']['NAs'] != 
                    summary['Metadata']['common_vars'][key]['DFs']['DF2']['NAs'] }}>
                        {{ summary['Metadata']['common_vars'][key]['DFs']['DF1']['NAs'] }}
                    </TD>
                    <TD class={{ 'na_highlight' if 
                    summary['Metadata']['common_vars'][key]['DFs']['DF1']['NAs'] != 
                    summary['Metadata']['common_vars'][key]['DFs']['DF2']['NAs'] }}>
                        {{ summary['Metadata']['common_vars'][key]['DFs']['DF2']['NAs'] }}
                    </TD>
                </TR>
            {% endfor %}
            </tbody>
        </table>
        </div>


    </div>

    <p></p>
    <div class="row">
        <div>
        <h4>Okay, but how do they actually look like. In person, you know?</h4>
        <p><i>Cross-hatching indicates differences between two datasets</i></p>
        </div>
    </div>

    <div class="row">
        <div class= "d-flex align-content-start">
        <div class="col-md-6" style="text-align: center;">
            <p>Here's the first dataset</p>
            <img src="static/images/image_1.png" class="img-fluid"/></div>
        <div class="col-md-6" style="text-align: center;">
            <p>Here's the second dataset</p>
            <img src="static/images/image_2.png" class="img-fluid"/></div>
        </div>
    </div>
</div>

</body>
</html>